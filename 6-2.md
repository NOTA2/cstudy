# 6주차 - C언어 심화


***

### 파일 위치 지시자
경우에 따라선 파일의 중간 또는 마지막 부분에 저장된 데이터의 일부를 읽어야 할 경우도 있을 것이다. 이때 '파일 위치 지시자'를 사용한다.

#### 파일 위치 지시자란?
* FILE 구조체 멤버중에선 파일의 위치 정보를 저장하고 있는 멤버가 있다.
  * 이 멤버의 값은 파일을 사용할 때마다(파일 입출력 관련 함수를 호출할 때 마다) 참조 및 갱신된다.
  * 이 멤버를 통해 데이터를 읽고 쓸 위치가 정보가 유지된다.
* 파일 위치 지시자는 파일이 개방되면 맨 앞을 가리킨다.


#### fseek 함수 : 파일 위치 지시자의 이동
```C
#include<stdio.h>
int fseek(FILE * stream, long offset, int wherefrom);
```
1. strem으로 전달된 파일 위치 지시자를
2. wherefrom 부터 시작해서
3. offset 바이트 만큼 이동!


* wherefrom에 전달될 수 있는 상수

| wherefrom  ||  파일 위치 지시자의 위치 |
| :--------: | :--------: | :--------: |
| SEEK_SET  | 0 | 파일의 맨 앞에서부터 시작 |
| SEEK_CUR | 1 | 현재 위치에서부터 시작 |
| SEEK_END | 2 | 파일의 맨 뒤(EOF)부터 시작 |


* offset은 양의 정수 뿐만 아니라 음의 정수도 전달될 수 있다.

* 그림으로 이해하기
  * ![그림](https://4.bp.blogspot.com/-D13aDrFBMoo/WHIH3a88gpI/AAAAAAAAAko/Gq2YjtwZ3Dg6qBUO7NVaWEThOiR-VnfQwCLcB/s1600/%25EC%25BA%25A1%25EC%25B2%2598.JPG)
    * SEEK_SET 전달 시 첫번재 바이트 부터 시작
    * SEEK_END 전달 시 EOF에서부터 시작
    * offset으로 음수 전달 시 왼쪽(앞부분)으로 이동

***

#### ftell 함수 : 현재 파일 위치 지시자의 위치
```C
#include<stdio.h>
long ftell(FILE * stream);
```
* 파일 위치 지시자의 위치 정보를 반환
  * 가장 앞 부분의 바이트 위치를 0으로 간주한다.
* TellFileReWrPos.c

***
### 문제
1. mystory.txt라는 이름의 파일을 생성해서 이름, 주민번호, 전화번호를 저장한다. 저장의 형태는 아래와 같아야 한다.
```
#이름: 김동현
#주민번호: 941225-1234567
#전화번호: 010-3798-5487
```
2. 문제 1에서 작성된 파일에 데이터를 추가하자. 추가할 데이터는 즐겨먹는 음식과 취미이다. 저장의 형태는 아래와 같아야 한다.
```
#즐겨먹는 음식: 짬뽕, 탕수육, 짜장면
#취미: 축구, 농구
```
3. mystory.txt에 저장된 정보 전체를 출력하는 프로그램

4. 파일의 크기를 Byte단위로 계산하여 반환하는 함수를 정의하고 이 함수를 사용해서 파일의 크기를 반환하는 프로그램을 작성하자.
  * 단 이때 ftell을 이용해서 구현해야 하며, 함수가 호출된 이후에도 파일 위치 지시자의 정보가 변경되어선 안된다. (만약 변경되었다면, 원래대로 돌려놔야 한다.)
  * 이를 main함수의 매개변수를 사용해서 구현해볼 수 있어야 한다.

***

## 동적할당

### C언어의 메모리 구조

***
### 메모리 할당

#### malloc 함수

#### free 함수

#### calloc 함수

#### realloc 함수
